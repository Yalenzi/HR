<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قالب مشهد - نظام إدارة الموظفين</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .form-control {
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .employee-selector {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #667eea;
        }

        .employee-search {
            position: relative;
            margin-bottom: 15px;
        }

        .employee-search input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
        }

        .employee-search i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }

        .employee-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: white;
        }

        .employee-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f1f3f4;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .employee-item:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .employee-item.selected {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .employee-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .employee-table th,
        .employee-table td {
            padding: 12px 15px;
            text-align: right;
            border: 1px solid #e9ecef;
        }

        .employee-table th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .employee-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .content-editor {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .content-editor textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
        }

        .signature-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .signature-upload {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .signature-preview {
            width: 200px;
            height: 100px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            overflow: hidden;
        }

        .signature-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
            color: white;
        }

        .btn-info {
            background: linear-gradient(45deg, #17a2b8, #6f42c1);
            color: white;
        }

        .preview-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        .certificate-preview {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            border: 3px solid #667eea;
            border-radius: 15px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            position: relative;
        }

        .certificate-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #667eea;
        }

        .certificate-title {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .certificate-subtitle {
            font-size: 1.2rem;
            color: #6c757d;
        }

        .certificate-body {
            margin: 30px 0;
            line-height: 1.8;
            font-size: 1.1rem;
            text-align: justify;
        }

        .certificate-footer {
            display: flex;
            justify-content: space-between;
            align-items: end;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .signature-area {
            text-align: center;
            min-width: 200px;
        }

        .signature-line {
            border-bottom: 2px solid #333;
            margin-bottom: 10px;
            height: 60px;
            display: flex;
            align-items: end;
            justify-content: center;
        }

        .date-area {
            text-align: center;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: none;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                background: white;
            }
            
            .form-section,
            .btn,
            .employee-selector {
                display: none;
            }
            
            .preview-section {
                box-shadow: none;
                margin: 0;
                padding: 0;
            }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .certificate-footer {
                flex-direction: column;
                gap: 30px;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-certificate"></i> قالب مشهد - شهادة موظف</h1>
            <p>إنشاء شهادات ومشاهد رسمية للموظفين مع التعبئة التلقائية للبيانات</p>
        </div>

        <!-- Employee Selection -->
        <div class="employee-selector">
            <h3><i class="fas fa-user-search"></i> اختيار الموظف</h3>
            <div class="employee-search">
                <input type="text" id="employeeSearch" placeholder="ابحث بالاسم أو الهوية الوطنية أو رقم الموظف...">
                <i class="fas fa-search"></i>
            </div>
            <div class="employee-list" id="employeeList">
                <div style="padding: 20px; text-align: center; color: #6c757d;">
                    <i class="fas fa-spinner fa-spin"></i> جاري تحميل قائمة الموظفين...
                </div>
            </div>
        </div>

        <!-- Employee Data Table -->
        <div class="form-section">
            <h3><i class="fas fa-table"></i> بيانات الموظف</h3>
            <table class="employee-table" id="employeeDataTable">
                <thead>
                    <tr>
                        <th>البيان</th>
                        <th>القيمة</th>
                        <th>البيان</th>
                        <th>القيمة</th>
                        <th>البيان</th>
                        <th>القيمة</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>الاسم</strong></td>
                        <td id="empName">-</td>
                        <td><strong>الهوية الوطنية</strong></td>
                        <td id="empNationalId">-</td>
                        <td><strong>رقم الموظف</strong></td>
                        <td id="empNumber">-</td>
                    </tr>
                    <tr>
                        <td><strong>الوظيفة</strong></td>
                        <td id="empPosition">-</td>
                        <td><strong>الإدارة</strong></td>
                        <td id="empDepartment">-</td>
                        <td><strong>الجنسية</strong></td>
                        <td id="empNationality">-</td>
                    </tr>
                    <tr>
                        <td><strong>تاريخ التعيين</strong></td>
                        <td id="empHireDate">-</td>
                        <td><strong>الهاتف</strong></td>
                        <td id="empPhone">-</td>
                        <td><strong>البريد الإلكتروني</strong></td>
                        <td id="empEmail">-</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Certificate Content Editor -->
        <div class="content-editor">
            <h3><i class="fas fa-edit"></i> محتوى الشهادة/المشهد</h3>
            <div class="form-group">
                <label>عنوان الشهادة</label>
                <input type="text" class="form-control" id="certificateTitle" value="شهادة من يهمه الأمر" placeholder="أدخل عنوان الشهادة">
            </div>
            <div class="form-group" style="margin-top: 15px;">
                <label>نص الشهادة</label>
                <textarea class="form-control" id="certificateContent" placeholder="أدخل نص الشهادة هنا...">
نشهد نحن مركز الخدمات الطبية الشرعية بأن المذكور أعلاه يعمل لدينا في الوظيفة المبينة أمام اسمه، وأن جميع البيانات المذكورة صحيحة ومطابقة لما هو مدون في سجلاتنا الرسمية.

وقد أعطيت له هذه الشهادة بناءً على طلبه دون أدنى مسؤولية علينا.

والله الموفق،،،
                </textarea>
            </div>
        </div>

        <!-- Signature Section -->
        <div class="signature-section">
            <h3><i class="fas fa-signature"></i> التوقيع والختم</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>اسم المدير</label>
                    <input type="text" class="form-control" id="managerName" value="د. فواز جمال الديدب" placeholder="اسم المدير">
                </div>
                <div class="form-group">
                    <label>منصب المدير</label>
                    <input type="text" class="form-control" id="managerPosition" value="مدير مركز الخدمات الطبية الشرعية" placeholder="منصب المدير">
                </div>
            </div>
            <div class="signature-upload">
                <div class="form-group">
                    <label>رفع صورة التوقيع (اختياري)</label>
                    <input type="file" class="form-control" id="signatureUpload" accept="image/*">
                </div>
                <div class="signature-preview" id="signaturePreview">
                    <span style="color: #6c757d;">معاينة التوقيع</span>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div style="text-align: center; margin: 30px 0;">
            <button class="btn btn-primary" onclick="generatePreview()">
                <i class="fas fa-eye"></i> معاينة الشهادة
            </button>
            <button class="btn btn-success" onclick="generatePDF()">
                <i class="fas fa-file-pdf"></i> تحميل PDF
            </button>
            <button class="btn btn-warning" onclick="printCertificate()">
                <i class="fas fa-print"></i> طباعة
            </button>
            <button class="btn btn-info" onclick="saveDraft()">
                <i class="fas fa-save"></i> حفظ مسودة
            </button>
        </div>

        <!-- Preview Section -->
        <div class="preview-section" id="previewSection" style="display: none;">
            <h3 style="text-align: center; margin-bottom: 30px;">
                <i class="fas fa-eye"></i> معاينة الشهادة
            </h3>
            <div class="certificate-preview" id="certificatePreview">
                <!-- Certificate content will be generated here -->
            </div>
        </div>
    </div>

    <script src="certificate_template.js"></script>
</body>
</html>
